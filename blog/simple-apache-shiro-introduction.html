<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="../style.css">
    <title>Simple Apache Shiro Introduction</title>
  </head>
  <body>
	  <div class="container">	  
  		<h1>Simple <a href="https://shiro.apache.org">Apache Shiro</a> Introduction</h1>
      
      <code>
        &lt;dependency&gt;<br>
            &lt;groupId&gt;org.apache.shiro &lt;/groupId &gt;<br>
            &lt;artifactId&gt;shiro-core &lt;/artifactId &gt;<br>
            &lt;version&gt;1.5.1 &lt;/version&gt;<br>
        &lt;/dependency&gt;<br>
      </code>
      
      <p>
        The names of classes are marked in <b>bold</b> in this post. So you can easily get started.
        If you find any mistakes in this blog post please send me an email.
      </p>
      
      <h3> Concepts in Apache Shiro </h3>
      
      <h5> Realm Concept </h5>
      <p>
        There can be multiple <b>Realm</b>. Such as <b><a href="https://shiro.apache.org/static/1.5.1/apidocs/org/apache/shiro/realm/SimpleAccountRealm.html">SimpleAccountRealm</a></b>.
        A <b>SimpleAccountRealm</b> is a simple implementation of the <b>Realm</b> Interface. 
        Like every Realm, it can be given a Name. 
        It supports adding Roles and Accounts (in this case, pairs of username,password) to its instance.
        After adding Accounts and Roles, the Realm can be questioned whether an account or role exists.
        A <b>CredentialsMatcher</b> can be set on the realm and accessed later on.
      <br>
        <code>
		<br>
		SimpleAccountRealm realm = new SimpleAccountRealm("myrealm");<br>
		<br>
		//set credentials to be matched plain (without hashing or similar)<br>
		ream.setCredentialsMatcher(new SimpleCredentialsMatcher());<br>
		
		realm.addRole("Admin");<br>
		realm.addRole("Dev");<br>
		<br>
		//add an account with username, password and a role<br>
		realm.addAccount("username","password","Admin");<br>
		<br>
		realm.accountExists("username");	//returns true<br>
		realm.accountExists("peter");		//returns false<br>
		<br>
		realm.roleExists("Admin"); 		//returns true<br>
		realm.roleExists("Magician"); 		//returns false<br>
      	</code>
      </p>
      
      <h5>AuthenticationInfo and AuthenticationToken</h5>
      
      <p>
        For Authorization Purposes, we can create <b> UsernamePasswordToken</b> Object. It implements <b> AuthenticationToken </b> Interface.
        
        From the <b>AuthenticationToken </b> we can then use our users table in the database to create an <b> AuthenticationInfo</b> instance.
      </p>
	<code>
		<br>
		SimpleAccountRealm realm = initRealm(); // assume it exists<br>
		SecurityManager mg = new DefaultSecurityManager(realm);<br>
		<br>
		SecurityUtils.setSecurityManager(mg);<br>
		<br>
		//implements AuthenticationToken interface <br>
		UsernamePasswordToken token = new UsernamePasswordToken("username","password");<br>
		<br>
		//obtain our credentials matcher (the SimpleCredentialsMatcher we configured on our realm earlier)<br>
		//and use it to match our credentials<br>
		AuthenticationInfo authInfo = new SimpleAuthenticationInfo(token.getPrincipal(),token.getCredentials(),"myrealm");<br>
		<br>
		boolean match = realm<br>
		.getCredentialsMatcher()<br>
		.doCredentialsMatch(token,authInfo);<br>
		<br>
		//match should be true<br>
	</code>
    </div>
  </body>
</html>
